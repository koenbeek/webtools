<!DOCTYPE html>
<html lang=”en”>

<head>
  <title>Match Lines</title>
  <script src="js/lib.js"></script>
</head>

<body>
  <h1>Match Lines</h1>
  <label>Pattern: <input type="text" id="pat" size=50></label><a href="docs/regex.html" target="_blank">cheatsheet</a><br><br>
  <label><input type="checkbox" id="inv">Invert match (only keep non-matching lines)</label><br>
  <label><input type="checkbox" id="ic">Ignore case</label><br>
  <label><input type="checkbox" id="match">Only Matching (only keep part that matched)</label>
</body>
<script>
  function run() {
    try {
      let re = new RegExp(gV("pat"), gC("ic") ? "i" : "")
      let ls = gV("itxt").split('\n').filter(l => (l.match(re) != null) != gC("inv")) // filter lines
      if (gC("match") && !gC("inv")) { ls = ls.map(l => l.match(re)[0]) } // only keep matched part
      gE("otxt").value = ls.join("\n")
      sOK("pat")
    } catch (e) { sErr("pat", e) }
  }
  doSetup(run, [10, 100], [10, 100])
</script>

</html>