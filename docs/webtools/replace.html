<!DOCTYPE html>
<html lang=”en”>

<head>
  <title>REplace text</title>
  <script src="js/lib.js"></script>
</head>

<body>
  <h1>REplace text</h1>
  <label>Match pattern:&nbsp;<input type="text" id="m" size=50></label><a href="docs/regex.html" target="_blank">cheatsheet</a><br>
  <label>Replace pattern:&nbsp;<input type="text" id="r" size=50></label>match: $&amp; - precedes: $`- follows: $' - group: $n - named: $&lt;Name&gt;<br>
  <label>Match scope:&nbsp;
    <select id="sc">
      <option value="F">Full (^ and $ on doc level)</option>
      <option value="M" selected="selected">Full (^ and $ on line level)</option>
      <option value="L">Line by Line match</option>
    </select>
  </label><br>
  <label><input type="checkbox" id="ic">Ignore case</label><br>
  <label><input type="checkbox" id="gl" checked>Global match (more than 1 match possible)</label>
</body>
<script>
  function run() {
    const s = gV("sc"), r = gV("r")
    try {
      let re = new RegExp(gE("m").value, (gC("ic") ? "i" : "") + (gC("gl") ? "g" : "") + (s == "M" ? "m" : ""))
      gE("otxt").value = (s == "L") ? gV("itxt").split('\n').map(l => l.replace(re, r)).join("\n") : gV("itxt").replace(re, r)
      sOK("m")
    } catch (e) { sErr("m", e) }
  }
  doSetup(run, [10, 150], [10, 150])
</script>

</html>